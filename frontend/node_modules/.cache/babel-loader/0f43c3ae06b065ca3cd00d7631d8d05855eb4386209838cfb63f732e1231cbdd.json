{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from \"../axios\";\nimport ReservationForm from \"./ReservationForm.vue\";\nexport default {\n  name: \"ReservationList\",\n  components: {\n    ReservationForm\n  },\n  data() {\n    return {\n      reservations: [],\n      selectedReservation: null,\n      filterDate: \"\",\n      searchName: \"\"\n    };\n  },\n  computed: {\n    sortedReservations() {\n      return [...this.reservations].sort((a, b) => new Date(a.startTime) - new Date(b.startTime));\n    },\n    filteredReservations() {\n      return this.sortedReservations.filter(r => {\n        const matchDate = this.filterDate ? r.startTime.startsWith(this.filterDate) : true;\n        const matchName = this.searchName ? r.reserverName.includes(this.searchName) : true;\n        return matchDate && matchName;\n      });\n    }\n  },\n  methods: {\n    async fetchReservations() {\n      const res = await axios.get(\"/api/reservations\");\n      this.reservations = res.data;\n    },\n    formatDate(dateString) {\n      const options = {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n      };\n      return new Date(dateString).toLocaleString(\"ko-KR\", options);\n    },\n    async deleteReservation(id) {\n      if (confirm(\"Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\")) {\n        await axios.delete(`/api/reservations/${id}`);\n        alert(\"ÏÇ≠Ï†ú ÏôÑÎ£å!\");\n        this.fetchReservations();\n      }\n    },\n    startEdit(reservation) {\n      this.selectedReservation = {\n        ...reservation\n      };\n    },\n    handleReservationSubmitted() {\n      this.fetchReservations();\n      this.selectedReservation = null;\n    },\n    clearFilters() {\n      this.filterDate = \"\";\n      this.searchName = \"\";\n    },\n    downloadCSV() {\n      const headers = \"ÏòàÏïΩÏûê,Ïä§ÌÑ∞ÎîîÎ£∏,ÏãúÏûë ÏãúÍ∞Ñ,Ï¢ÖÎ£å ÏãúÍ∞Ñ\\n\";\n      const rows = this.filteredReservations.map(r => [r.reserverName, r.room.roomName, this.formatDate(r.startTime), this.formatDate(r.endTime)].join(\",\")).join(\"\\n\");\n      const blob = new Blob([headers + rows], {\n        type: \"text/csv;charset=utf-8;\"\n      });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", \"reservations.csv\");\n      link.click();\n    }\n  },\n  created() {\n    this.fetchReservations();\n  }\n};","map":{"version":3,"names":["axios","ReservationForm","name","components","data","reservations","selectedReservation","filterDate","searchName","computed","sortedReservations","sort","a","b","Date","startTime","filteredReservations","filter","r","matchDate","startsWith","matchName","reserverName","includes","methods","fetchReservations","res","get","formatDate","dateString","options","year","month","day","hour","minute","toLocaleString","deleteReservation","id","confirm","delete","alert","startEdit","reservation","handleReservationSubmitted","clearFilters","downloadCSV","headers","rows","map","room","roomName","endTime","join","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","setAttribute","click","created"],"sources":["C:\\Users\\user\\Desktop\\Studyroom PRJ\\frontend\\src\\components\\ReservationList.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h2>ÏòàÏïΩ Î™©Î°ù</h2>\n\n    <!-- üîç ÌïÑÌÑ∞ & Í≤ÄÏÉâ & Îã§Ïö¥Î°úÎìú -->\n    <div class=\"filter-section\">\n      <label>ÏòàÏïΩÏûê Ïù¥Î¶Ñ Í≤ÄÏÉâ:</label>\n      <input v-model=\"searchName\" placeholder=\"Ïù¥Î¶Ñ ÏûÖÎ†•\" />\n\n      <label>ÎÇ†Ïßú ÌïÑÌÑ∞:</label>\n      <input type=\"date\" v-model=\"filterDate\" />\n\n      <button @click=\"clearFilters\">Ï†ÑÏ≤¥ Î≥¥Í∏∞</button>\n      <button @click=\"downloadCSV\">CSV Îã§Ïö¥Î°úÎìú</button>\n    </div>\n\n    <!-- üìã ÏòàÏïΩ ÏûÖÎ†• Ìèº -->\n    <ReservationForm\n      :editReservation=\"selectedReservation\"\n      @reservation-submitted=\"handleReservationSubmitted\"\n    />\n\n    <!-- üìä ÏòàÏïΩ ÌÖåÏù¥Î∏î -->\n    <table>\n      <thead>\n        <tr>\n          <th>ÏòàÏïΩÏûê</th>\n          <th>Ïä§ÌÑ∞ÎîîÎ£∏</th>\n          <th>ÏãúÏûë ÏãúÍ∞Ñ</th>\n          <th>Ï¢ÖÎ£å ÏãúÍ∞Ñ</th>\n          <th>ÏàòÏ†ï</th>\n          <th>ÏÇ≠Ï†ú</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"reservation in filteredReservations\" :key=\"reservation.id\">\n          <td>{{ reservation.reserverName }}</td>\n          <td>{{ reservation.room.roomName }}</td>\n          <td>{{ formatDate(reservation.startTime) }}</td>\n          <td>{{ formatDate(reservation.endTime) }}</td>\n          <td><button @click=\"startEdit(reservation)\">ÏàòÏ†ï</button></td>\n          <td><button @click=\"deleteReservation(reservation.id)\">ÏÇ≠Ï†ú</button></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"../axios\";\nimport ReservationForm from \"./ReservationForm.vue\";\n\nexport default {\n  name: \"ReservationList\",\n  components: { ReservationForm },\n  data() {\n    return {\n      reservations: [],\n      selectedReservation: null,\n      filterDate: \"\",\n      searchName: \"\",\n    };\n  },\n  computed: {\n    sortedReservations() {\n      return [...this.reservations].sort((a, b) => new Date(a.startTime) - new Date(b.startTime));\n    },\n    filteredReservations() {\n      return this.sortedReservations.filter((r) => {\n        const matchDate = this.filterDate ? r.startTime.startsWith(this.filterDate) : true;\n        const matchName = this.searchName ? r.reserverName.includes(this.searchName) : true;\n        return matchDate && matchName;\n      });\n    },\n  },\n  methods: {\n    async fetchReservations() {\n      const res = await axios.get(\"/api/reservations\");\n      this.reservations = res.data;\n    },\n    formatDate(dateString) {\n      const options = {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      };\n      return new Date(dateString).toLocaleString(\"ko-KR\", options);\n    },\n    async deleteReservation(id) {\n      if (confirm(\"Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\")) {\n        await axios.delete(`/api/reservations/${id}`);\n        alert(\"ÏÇ≠Ï†ú ÏôÑÎ£å!\");\n        this.fetchReservations();\n      }\n    },\n    startEdit(reservation) {\n      this.selectedReservation = { ...reservation };\n    },\n    handleReservationSubmitted() {\n      this.fetchReservations();\n      this.selectedReservation = null;\n    },\n    clearFilters() {\n      this.filterDate = \"\";\n      this.searchName = \"\";\n    },\n    downloadCSV() {\n      const headers = \"ÏòàÏïΩÏûê,Ïä§ÌÑ∞ÎîîÎ£∏,ÏãúÏûë ÏãúÍ∞Ñ,Ï¢ÖÎ£å ÏãúÍ∞Ñ\\n\";\n      const rows = this.filteredReservations\n        .map((r) =>\n          [\n            r.reserverName,\n            r.room.roomName,\n            this.formatDate(r.startTime),\n            this.formatDate(r.endTime),\n          ].join(\",\")\n        )\n        .join(\"\\n\");\n\n      const blob = new Blob([headers + rows], { type: \"text/csv;charset=utf-8;\" });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", \"reservations.csv\");\n      link.click();\n    },\n  },\n  created() {\n    this.fetchReservations();\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.filter-section {\n  margin-bottom: 20px;\n}\n\ninput,\nselect,\nbutton {\n  margin: 6px;\n  padding: 6px;\n  font-size: 14px;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\nth,\ntd {\n  border: 1px solid #ccc;\n  padding: 10px;\n  text-align: center;\n}\n\nth {\n  background-color: #f3f3f3;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}