{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from \"../axios\";\nimport ReservationForm from \"./ReservationForm.vue\";\nexport default {\n  name: \"ReservationList\",\n  components: {\n    ReservationForm\n  },\n  data() {\n    return {\n      reservations: [],\n      selectedReservation: null,\n      filterDate: \"\",\n      searchName: \"\"\n    };\n  },\n  computed: {\n    sortedReservations() {\n      return [...this.reservations].sort((a, b) => new Date(a.startTime) - new Date(b.startTime));\n    },\n    filteredReservations() {\n      return this.sortedReservations.filter(r => {\n        const matchDate = this.filterDate ? r.startTime.startsWith(this.filterDate) : true;\n        const matchName = this.searchName ? r.reserverName.includes(this.searchName) : true;\n        return matchDate && matchName;\n      });\n    }\n  },\n  methods: {\n    async fetchReservations() {\n      const res = await axios.get(\"/api/reservations\");\n      this.reservations = res.data;\n    },\n    formatDate(dateString) {\n      const options = {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n      };\n      return new Date(dateString).toLocaleString(\"ko-KR\", options);\n    },\n    async deleteReservation(id) {\n      if (confirm(\"Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\")) {\n        await axios.delete(`/api/reservations/${id}`);\n        alert(\"ÏÇ≠Ï†ú ÏôÑÎ£å!\");\n        this.fetchReservations();\n      }\n    },\n    startEdit(reservation) {\n      this.selectedReservation = {\n        ...reservation\n      };\n    },\n    handleReservationSubmitted() {\n      this.fetchReservations();\n      this.selectedReservation = null;\n    },\n    clearFilters() {\n      this.filterDate = \"\";\n      this.searchName = \"\";\n    },\n    downloadCSV() {\n      const headers = \"ÏòàÏïΩÏûê,Ïä§ÌÑ∞ÎîîÎ£∏,ÏãúÏûë ÏãúÍ∞Ñ,Ï¢ÖÎ£å ÏãúÍ∞Ñ\\n\";\n      const rows = this.filteredReservations.map(r => [r.reserverName, r.room.roomName, this.formatDate(r.startTime), this.formatDate(r.endTime)].join(\",\")).join(\"\\n\");\n      const blob = new Blob([headers + rows], {\n        type: \"text/csv;charset=utf-8;\"\n      });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", \"reservations.csv\");\n      link.click();\n    }\n  },\n  created() {\n    this.fetchReservations();\n  }\n};","map":{"version":3,"names":["axios","ReservationForm","name","components","data","reservations","selectedReservation","filterDate","searchName","computed","sortedReservations","sort","a","b","Date","startTime","filteredReservations","filter","r","matchDate","startsWith","matchName","reserverName","includes","methods","fetchReservations","res","get","formatDate","dateString","options","year","month","day","hour","minute","toLocaleString","deleteReservation","id","confirm","delete","alert","startEdit","reservation","handleReservationSubmitted","clearFilters","downloadCSV","headers","rows","map","room","roomName","endTime","join","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","setAttribute","click","created"],"sources":["C:\\Users\\user\\Desktop\\Studyroom PRJ\\frontend\\src\\components\\ReservationList.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2>ÏòàÏïΩ Î™©Î°ù</h2>\r\n\r\n    <!-- üîç ÌïÑÌÑ∞ & Í≤ÄÏÉâ & Îã§Ïö¥Î°úÎìú -->\r\n    <div class=\"filter-section\">\r\n      <label>ÏòàÏïΩÏûê Ïù¥Î¶Ñ Í≤ÄÏÉâ:</label>\r\n      <input v-model=\"searchName\" placeholder=\"Ïù¥Î¶Ñ ÏûÖÎ†•\" />\r\n\r\n      <label>ÎÇ†Ïßú ÌïÑÌÑ∞:</label>\r\n      <input type=\"date\" v-model=\"filterDate\" />\r\n\r\n      <button @click=\"clearFilters\">Ï†ÑÏ≤¥ Î≥¥Í∏∞</button>\r\n      <button @click=\"downloadCSV\">CSV Îã§Ïö¥Î°úÎìú</button>\r\n    </div>\r\n\r\n    <!-- üìã ÏòàÏïΩ ÏûÖÎ†• Ìèº -->\r\n    <ReservationForm\r\n      :editReservation=\"selectedReservation\"\r\n      @reservation-submitted=\"handleReservationSubmitted\"\r\n    />\r\n\r\n    <!-- üìä ÏòàÏïΩ ÌÖåÏù¥Î∏î -->\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>ÏòàÏïΩÏûê</th>\r\n          <th>Ïä§ÌÑ∞ÎîîÎ£∏</th>\r\n          <th>ÏãúÏûë ÏãúÍ∞Ñ</th>\r\n          <th>Ï¢ÖÎ£å ÏãúÍ∞Ñ</th>\r\n          <th>ÏàòÏ†ï</th>\r\n          <th>ÏÇ≠Ï†ú</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"reservation in filteredReservations\" :key=\"reservation.id\">\r\n          <td>{{ reservation.reserverName }}</td>\r\n          <td>{{ reservation.room.roomName }}</td>\r\n          <td>{{ formatDate(reservation.startTime) }}</td>\r\n          <td>{{ formatDate(reservation.endTime) }}</td>\r\n          <td><button @click=\"startEdit(reservation)\">ÏàòÏ†ï</button></td>\r\n          <td><button @click=\"deleteReservation(reservation.id)\">ÏÇ≠Ï†ú</button></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"../axios\";\r\nimport ReservationForm from \"./ReservationForm.vue\";\r\n\r\nexport default {\r\n  name: \"ReservationList\",\r\n  components: { ReservationForm },\r\n  data() {\r\n    return {\r\n      reservations: [],\r\n      selectedReservation: null,\r\n      filterDate: \"\",\r\n      searchName: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    sortedReservations() {\r\n      return [...this.reservations].sort((a, b) => new Date(a.startTime) - new Date(b.startTime));\r\n    },\r\n    filteredReservations() {\r\n      return this.sortedReservations.filter((r) => {\r\n        const matchDate = this.filterDate ? r.startTime.startsWith(this.filterDate) : true;\r\n        const matchName = this.searchName ? r.reserverName.includes(this.searchName) : true;\r\n        return matchDate && matchName;\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    async fetchReservations() {\r\n      const res = await axios.get(\"/api/reservations\");\r\n      this.reservations = res.data;\r\n    },\r\n    formatDate(dateString) {\r\n      const options = {\r\n        year: \"numeric\",\r\n        month: \"2-digit\",\r\n        day: \"2-digit\",\r\n        hour: \"2-digit\",\r\n        minute: \"2-digit\",\r\n      };\r\n      return new Date(dateString).toLocaleString(\"ko-KR\", options);\r\n    },\r\n    async deleteReservation(id) {\r\n      if (confirm(\"Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\")) {\r\n        await axios.delete(`/api/reservations/${id}`);\r\n        alert(\"ÏÇ≠Ï†ú ÏôÑÎ£å!\");\r\n        this.fetchReservations();\r\n      }\r\n    },\r\n    startEdit(reservation) {\r\n      this.selectedReservation = { ...reservation };\r\n    },\r\n    handleReservationSubmitted() {\r\n      this.fetchReservations();\r\n      this.selectedReservation = null;\r\n    },\r\n    clearFilters() {\r\n      this.filterDate = \"\";\r\n      this.searchName = \"\";\r\n    },\r\n    downloadCSV() {\r\n      const headers = \"ÏòàÏïΩÏûê,Ïä§ÌÑ∞ÎîîÎ£∏,ÏãúÏûë ÏãúÍ∞Ñ,Ï¢ÖÎ£å ÏãúÍ∞Ñ\\n\";\r\n      const rows = this.filteredReservations\r\n        .map((r) =>\r\n          [\r\n            r.reserverName,\r\n            r.room.roomName,\r\n            this.formatDate(r.startTime),\r\n            this.formatDate(r.endTime),\r\n          ].join(\",\")\r\n        )\r\n        .join(\"\\n\");\r\n\r\n      const blob = new Blob([headers + rows], { type: \"text/csv;charset=utf-8;\" });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement(\"a\");\r\n      link.setAttribute(\"href\", url);\r\n      link.setAttribute(\"download\", \"reservations.csv\");\r\n      link.click();\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchReservations();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.filter-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\ninput,\r\nselect,\r\nbutton {\r\n  margin: 6px;\r\n  padding: 6px;\r\n  font-size: 14px;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 20px;\r\n}\r\n\r\nth,\r\ntd {\r\n  border: 1px solid #ccc;\r\n  padding: 10px;\r\n  text-align: center;\r\n}\r\n\r\nth {\r\n  background-color: #f3f3f3;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}